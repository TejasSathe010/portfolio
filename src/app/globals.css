@tailwind base;
@tailwind components;
@tailwind utilities;

/* =================================================================
   ENGINEERING DESIGN SYSTEM - GOD UI TOKENS
   "Professional Tech-Luxe" Palette + Cohesive Surface Model
   ================================================================= */

:root {
  /* ─────────────────────────────────────────────────────────────────
     SURFACE MODEL (4-LAYER)
     bg → surface → surface2 → surface3 (elevated states)
     ───────────────────────────────────────────────────────────────── */
  --bg: 250 251 252;
  /* Page canvas - soft warm white */
  --surface: 255 255 255;
  /* Cards - pure white */
  --surface2: 248 250 252;
  /* Hover/elevated - cloud */
  --surface3: 241 245 249;
  /* Callouts/notes - mist */

  /* ─────────────────────────────────────────────────────────────────
     INK HIERARCHY (TYPOGRAPHY)
     ───────────────────────────────────────────────────────────────── */
  --fg: 15 23 42;
  /* Headings - slate 900 */
  --muted: 51 65 85;
  /* Body text - slate 600 */
  --muted2: 100 116 139;
  /* Meta/captions - slate 500 */

  /* ─────────────────────────────────────────────────────────────────
     MICRO-CONTRAST BORDERS
     ───────────────────────────────────────────────────────────────── */
  --border: 226 232 240;
  /* Default - slate 200 */
  --border2: 203 213 225;
  /* Accent - slate 300 */
  --borderSubtle: 241 245 249;
  /* Very subtle - slate 100 */
  --borderStrong: 148 163 184;
  /* Strong - slate 400 */
  --edgeLight: linear-gradient(135deg, rgba(var(--p), 0.3), transparent 50%, rgba(var(--s), 0.2));
  /* Gradient hairline for premium elements */

  /* ─────────────────────────────────────────────────────────────────
     ACCENT PALETTE (SAPPHIRE / TEAL / COPPER)
     3 accents max, professional tech-luxe
     ───────────────────────────────────────────────────────────────── */
  --p: 59 130 246;
  /* Primary - Sapphire (blue 500) */
  --p-hover: 37 99 235;
  /* Primary hover - blue 600 */
  --s: 20 184 166;
  /* Secondary - Deep Teal (teal 500) */
  --s-hover: 13 148 136;
  /* Secondary hover - teal 600 */
  --w: 217 119 6;
  /* Warm - Copper (amber 600) */
  --w-hover: 180 83 9;
  /* Warm hover - amber 700 */

  /* ─────────────────────────────────────────────────────────────────
     TINT LAYERS (Visible but tasteful)
     Use these for backgrounds, hovers, and section theming
     ───────────────────────────────────────────────────────────────── */
  --pTint: 59 130 246;
  /* Sapphire @ 6% for bg-primary-tint/6 */
  --pTint2: 59 130 246;
  /* Sapphire @ 12% for bg-primary-tint-2/12 */
  --sTint: 20 184 166;
  /* Teal @ 6% */
  --sTint2: 20 184 166;
  /* Teal @ 12% */
  --wTint: 217 119 6;
  /* Copper @ 5% */
  --wTint2: 217 119 6;
  /* Copper @ 10% */

  /* ─────────────────────────────────────────────────────────────────
     GRADIENTS (2-color max, disciplined)
     ───────────────────────────────────────────────────────────────── */
  --grad-ps: linear-gradient(135deg, rgb(var(--p)), rgb(var(--s)));
  --grad-sp: linear-gradient(135deg, rgb(var(--s)), rgb(var(--p)));
  --grad-pw: linear-gradient(135deg, rgb(var(--p)), rgb(var(--w)));

  /* ─────────────────────────────────────────────────────────────────
     FOCUS RING
     ───────────────────────────────────────────────────────────────── */
  --ring: 59 130 246;

  /* ─────────────────────────────────────────────────────────────────
     RADII (Consistent, surgical)
     ───────────────────────────────────────────────────────────────── */
  --rCard: 12px;
  --rBtn: 8px;
  --rChip: 9999px;

  /* ─────────────────────────────────────────────────────────────────
     SHADOWS (Soft, layered - ambient occlusion style)
     ───────────────────────────────────────────────────────────────── */
  --shadow1: 0 1px 2px 0 rgba(0, 0, 0, 0.04), 0 1px 3px 0 rgba(0, 0, 0, 0.03);
  --shadow2: 0 2px 4px -1px rgba(0, 0, 0, 0.05), 0 4px 6px -1px rgba(0, 0, 0, 0.04);
  --shadow3: 0 4px 8px -2px rgba(0, 0, 0, 0.06), 0 8px 16px -4px rgba(0, 0, 0, 0.05);
  --shadowGlow: 0 0 0 1px rgba(var(--p), 0.15), 0 4px 12px -2px rgba(var(--p), 0.2);

  /* ─────────────────────────────────────────────────────────────────
     LAYOUT TOKENS (Grid + Rhythm)
     ───────────────────────────────────────────────────────────────── */
  --containerMax: 1120px;
  --gutterSm: 1rem;    /* 16px mobile */
  --gutterMd: 1.5rem;  /* 24px tablet */
  --gutterLg: 2rem;    /* 32px desktop */
  --sectionPySm: 4rem;  /* 64px mobile */
  --sectionPyMd: 6rem;  /* 96px desktop */
  --stackSm: 0.75rem;   /* 12px */
  --stackMd: 1rem;      /* 16px */
  --stackLg: 1.5rem;    /* 24px */

  /* ─────────────────────────────────────────────────────────────────
     MOTION (Premium, engineered)
     ───────────────────────────────────────────────────────────────── */
  --easeOut: cubic-bezier(0.16, 1, 0.3, 1);
  --durFast: 140ms;
  --durMed: 220ms;
  --durSlow: 320ms;
  --lift1: 1px;
  --lift2: 2px;

  /* Legacy aliases for compatibility */
  --primary: var(--p);
  --secondary: var(--s);
  --warm: var(--w);
  --accent: var(--p);
  --accent2: var(--s);
  --accent3: var(--w);

  color-scheme: light dark;
}

/* ═══════════════════════════════════════════════════════════════════
   DARK MODE
   ═══════════════════════════════════════════════════════════════════ */
@media (prefers-color-scheme: dark) {
  :root {
    --bg: 9 9 11;
    /* zinc 950 */
    --surface: 24 24 27;
    /* zinc 900 */
    --surface2: 39 39 42;
    /* zinc 800 */
    --surface3: 52 52 56;
    /* zinc 700 */

    --fg: 250 250 250;
    /* zinc 50 */
    --muted: 161 161 170;
    /* zinc 400 */
    --muted2: 113 113 122;
    /* zinc 500 */

    --border: 39 39 42;
    /* zinc 800 */
    --border2: 52 52 56;
    /* zinc 700 */

    /* Brighter accents for dark mode visibility */
    --p: 96 165 250;
    /* blue 400 */
    --p-hover: 147 197 253;
    /* blue 300 */
    --s: 45 212 191;
    /* teal 400 */
    --s-hover: 94 234 212;
    /* teal 300 */
    --w: 251 191 36;
    /* amber 400 */
    --w-hover: 252 211 77;
    /* amber 300 */

    --pTint: 96 165 250;
    --pTint2: 96 165 250;
    --sTint: 45 212 191;
    --sTint2: 45 212 191;
    --wTint: 251 191 36;
    --wTint2: 251 191 36;

    --ring: 96 165 250;

    --shadow1: 0 1px 3px 0 rgba(0, 0, 0, 0.4);
    --shadow2: 0 4px 6px -1px rgba(0, 0, 0, 0.5);
    --shadow3: 0 8px 16px -4px rgba(0, 0, 0, 0.6);
    --shadowGlow: 0 0 0 1px rgba(var(--p), 0.25), 0 4px 12px -2px rgba(var(--p), 0.3);
  }
}

/* ═══════════════════════════════════════════════════════════════════
   BASE STYLES
   ═══════════════════════════════════════════════════════════════════ */
html {
  height: 100%;
  overflow-x: hidden;
  scroll-behavior: smooth;
}

body {
  min-height: 100dvh;
  color: rgb(var(--fg));
  background:
    /* Color fields - visible but tasteful section tinting */
    radial-gradient(1200px circle at 10% 15%, rgba(var(--p), 0.04), transparent 50%),
    radial-gradient(1000px circle at 90% 10%, rgba(var(--s), 0.035), transparent 50%),
    radial-gradient(900px circle at 50% 85%, rgba(var(--w), 0.025), transparent 55%),
    radial-gradient(800px circle at 25% 55%, rgba(var(--s), 0.02), transparent 60%),
    rgb(var(--bg));
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  font-feature-settings: "kern" 1, "liga" 1;
  overflow-x: hidden;
}

@media (prefers-color-scheme: dark) {
  body {
    background:
      /* Boosted tints for dark mode visibility */
      radial-gradient(1200px circle at 10% 15%, rgba(var(--p), 0.12), transparent 50%),
      radial-gradient(1000px circle at 90% 10%, rgba(var(--s), 0.10), transparent 50%),
      radial-gradient(900px circle at 50% 85%, rgba(var(--w), 0.06), transparent 55%),
      radial-gradient(800px circle at 25% 55%, rgba(var(--s), 0.05), transparent 60%),
      rgb(var(--bg));
  }
}

/* Subtle grain texture */
body::before {
  content: "";
  position: fixed;
  inset: 0;
  pointer-events: none;
  opacity: 0.02;
  background-image:
    repeating-linear-gradient(0deg, rgba(0, 0, 0, 0.02) 0px, rgba(0, 0, 0, 0.02) 1px, transparent 1px, transparent 2px),
    repeating-linear-gradient(90deg, rgba(0, 0, 0, 0.015) 0px, rgba(0, 0, 0, 0.015) 1px, transparent 1px, transparent 2px);
  z-index: 0;
}

@media (prefers-color-scheme: dark) {
  body::before {
    opacity: 0.03;
    background-image:
      repeating-linear-gradient(0deg, rgba(255, 255, 255, 0.015) 0px, rgba(255, 255, 255, 0.015) 1px, transparent 1px, transparent 2px),
      repeating-linear-gradient(90deg, rgba(255, 255, 255, 0.01) 0px, rgba(255, 255, 255, 0.01) 1px, transparent 1px, transparent 2px);
  }
}

main,
header,
footer {
  position: relative;
  z-index: 1;
}

::selection {
  background: rgba(var(--p), 0.15);
  color: rgb(var(--fg));
}

:focus-visible {
  outline: 2px solid rgb(var(--ring));
  outline-offset: 2px;
  border-radius: 4px;
}

/* ═══════════════════════════════════════════════════════════════════
   TYPOGRAPHY SYSTEM (PREMIUM POLISH)
   ═══════════════════════════════════════════════════════════════════ */
h1,
h2,
h3,
h4,
h5,
h6 {
  font-weight: 600;
  color: rgb(var(--fg));
  text-wrap: balance;
}

h1 {
  font-size: 1.875rem;
  font-weight: 600;
  letter-spacing: -0.03em;
  line-height: 1.08;
  text-wrap: balance;
}

@media (min-width: 640px) {
  h1 {
    font-size: 2.25rem;
  }
}

@media (min-width: 1024px) {
  h1 {
    font-size: 3rem;
  }
}

h2 {
  font-size: 1.25rem;
  font-weight: 600;
  letter-spacing: -0.02em;
  line-height: 1.15;
  text-wrap: balance;
}

@media (min-width: 640px) {
  h2 {
    font-size: 1.5rem;
  }
}

@media (min-width: 1024px) {
  h2 {
    font-size: 1.875rem;
  }
}

h3 {
  font-size: 1.125rem;
  font-weight: 600;
  letter-spacing: -0.01em;
  line-height: 1.2;
  text-wrap: balance;
}

@media (min-width: 640px) {
  h3 {
    font-size: 1.25rem;
  }
}

p {
  font-size: 0.9375rem;
  line-height: 1.75;
  color: rgb(var(--muted));
  text-wrap: pretty;
}

@media (min-width: 640px) {
  p {
    font-size: 1rem;
  }
}

a {
  transition: color var(--durMed) var(--easeOut);
}

/* ═══════════════════════════════════════════════════════════════════
   KEYFRAMES
   ═══════════════════════════════════════════════════════════════════ */
@keyframes sheen {
  0% {
    transform: translateX(-100%) skewX(-15deg);
    opacity: 0;
  }

  50% {
    opacity: 1;
  }

  100% {
    transform: translateX(100%) skewX(-15deg);
    opacity: 0;
  }
}

@keyframes reveal {
  from {
    opacity: 0;
    transform: translateY(10px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes target-pulse {
  from {
    opacity: 0.6;
  }
  to {
    opacity: 0;
  }
}

@keyframes skeleton {
  0% {
    background-position: -200% 0;
  }

  100% {
    background-position: 200% 0;
  }
}

@keyframes fade-in-up {
  from {
    opacity: 0;
    transform: translateY(8px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* ═══════════════════════════════════════════════════════════════════
   REDUCED MOTION
   ═══════════════════════════════════════════════════════════════════ */
@media (prefers-reduced-motion: reduce) {

  *,
  *::before,
  *::after {
    animation-duration: 1ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 1ms !important;
    scroll-behavior: auto !important;
  }

  .reveal,
  .reveal-on {
    opacity: 1 !important;
    transform: none !important;
  }
}

/* ═══════════════════════════════════════════════════════════════════
   UTILITY CLASSES
   ═══════════════════════════════════════════════════════════════════ */
@layer utilities {
  .text-balance {
    text-wrap: balance;
  }

  .text-pretty {
    text-wrap: pretty;
  }

  /* Reveal animation */
  .reveal {
    opacity: 0;
    transform: translate3d(0, 16px, 0);
    will-change: transform, opacity;
  }

  .reveal-on {
    opacity: 1;
    transform: translate3d(0, 0, 0);
    transition: opacity var(--durSlow) var(--easeOut), transform var(--durSlow) var(--easeOut);
  }

  /* Anchor target pulse */
  .anchor-target {
    position: relative;
  }

  .anchor-target:target::after {
    content: "";
    position: absolute;
    inset: -8px -4px;
    border-radius: 14px;
    background: rgba(var(--p), 0.08);
    opacity: 0;
    animation: target-pulse var(--durSlow) var(--easeOut);
    pointer-events: none;
  }

  /* Chip micro motion */
  .chip {
    position: relative;
    transition: border-color var(--durFast) var(--easeOut), background-color var(--durFast) var(--easeOut), color var(--durFast) var(--easeOut);
  }

  .chip::after {
    content: "";
    position: absolute;
    right: 6px;
    top: 50%;
    width: 4px;
    height: 4px;
    margin-top: -2px;
    border-radius: 999px;
    background: rgba(var(--p), 0.6);
    opacity: 0;
    transition: opacity var(--durFast) var(--easeOut);
    pointer-events: none;
  }

  .chip:hover::after {
    opacity: 1;
  }

  /* Premium surface treatment */
  .surface-premium {
    position: relative;
    background:
      linear-gradient(180deg, rgba(var(--p), 0.06) 0%, transparent 55%),
      linear-gradient(135deg, rgba(var(--s), 0.04), transparent 45%),
      rgb(var(--surface));
  }

  /* Subtle specular hairline */
  .edge-light-top {
    position: relative;
  }

  .edge-light-top::before {
    content: "";
    position: absolute;
    left: 16px;
    right: 16px;
    top: 0;
    height: 1px;
    background: linear-gradient(to right, transparent, rgba(var(--p), 0.35), rgba(var(--s), 0.25), transparent);
    opacity: 0.6;
    pointer-events: none;
  }

  /* Premium border glow (static, subtle) */
  .premium-border {
    position: relative;
  }

  .premium-border::after {
    content: "";
    position: absolute;
    inset: 0;
    border-radius: inherit;
    padding: 1px;
    background: linear-gradient(135deg, rgba(var(--p), 0.25), transparent 45%, rgba(var(--s), 0.2));
    -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
    mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
    -webkit-mask-composite: xor;
    mask-composite: exclude;
    pointer-events: none;
  }

  /* Premium inline link underline */
  .link-premium {
    position: relative;
  }

  .link-premium::after {
    content: "";
    position: absolute;
    left: 0;
    right: 0;
    bottom: -2px;
    height: 1px;
    transform: scaleX(0);
    transform-origin: left;
    background: linear-gradient(to right, transparent, rgba(var(--s), 0.6), transparent);
    transition: transform var(--durMed) var(--easeOut);
  }

  .link-premium:hover::after,
  .link-premium:focus-visible::after {
    transform: scaleX(1);
  }

  /* Premium divider */
  .divider-premium {
    height: 1px;
    width: 100%;
    background: linear-gradient(to right, transparent, rgba(var(--p), 0.25), rgba(var(--s), 0.2), transparent);
  }

  /* Skeleton loader */
  .skeleton {
    background: linear-gradient(90deg,
        rgb(var(--surface2)) 0%,
        rgb(var(--surface3)) 50%,
        rgb(var(--surface2)) 100%);
    background-size: 200% 100%;
    animation: skeleton 1.5s ease-in-out infinite;
    border-radius: 4px;
  }

  @media (prefers-reduced-motion: reduce) {
    .skeleton {
      animation: none;
      background: rgb(var(--surface2));
    }
  }

  /* Stagger animation support */
  .stagger-1 {
    animation-delay: 50ms;
  }

  .stagger-2 {
    animation-delay: 100ms;
  }

  .stagger-3 {
    animation-delay: 150ms;
  }

  .stagger-4 {
    animation-delay: 200ms;
  }

  .stagger-5 {
    animation-delay: 250ms;
  }

  .stagger-6 {
    animation-delay: 300ms;
  }

  /* Fade in up animation */
  .animate-fade-in-up {
    animation: fade-in-up 400ms var(--easeOut) both;
  }

  /* Sheen effect (hover-only, subtle) */
  .sheen {
    position: relative;
    overflow: hidden;
  }

  .sheen::after {
    content: "";
    position: absolute;
    inset: -50% -25%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.06), transparent);
    transform: translateX(-100%) skewX(-15deg);
    opacity: 0;
    pointer-events: none;
  }

  .sheen:hover::after {
    animation: sheen 700ms var(--easeOut);
    opacity: 1;
  }

  @media (prefers-reduced-motion: reduce) {
    .sheen::after {
      animation: none;
      opacity: 0;
    }
  }

  /* Gradient hairline border */
  .gradient-border {
    position: relative;
  }

  .gradient-border::before {
  content: "";
    position: absolute;
  inset: 0;
    border-radius: inherit;
    padding: 1px;
    background: linear-gradient(135deg, rgba(var(--p), 0.3), transparent 50%, rgba(var(--s), 0.2));
    -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
    mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
    -webkit-mask-composite: xor;
    mask-composite: exclude;
  pointer-events: none;
  }

  /* ═══════════════════════════════════════════════════════════════════
     SECTION THEMING (Chapter backgrounds)
     ═══════════════════════════════════════════════════════════════════ */
  .section-primary {
    background: linear-gradient(180deg, rgba(var(--p), 0.02) 0%, transparent 100%);
  }

  .section-secondary {
    background: linear-gradient(180deg, rgba(var(--s), 0.02) 0%, transparent 100%);
  }

  .section-warm {
    background: linear-gradient(180deg, rgba(var(--w), 0.015) 0%, transparent 100%);
  }

  .section-blend {
    background: linear-gradient(135deg, rgba(var(--p), 0.015) 0%, transparent 50%, rgba(var(--s), 0.015) 100%);
  }

  /* ═══════════════════════════════════════════════════════════════════
     TWO-STAGE HOVER (Premium feel)
     Stage 1: Immediate border + bg tint
     Stage 2: Delayed lift + shadow
     ═══════════════════════════════════════════════════════════════════ */
  .hover-lift {
    transition:
      border-color 120ms var(--easeOut),
      background-color 120ms var(--easeOut),
      transform var(--durMed) var(--easeOut) 120ms;
  }

  .hover-lift:hover {
    border-color: rgba(var(--p), 0.25);
    background-color: rgb(var(--surface));
  }

  @media (prefers-reduced-motion: no-preference) {
    .hover-lift:hover {
      transform: translate3d(0, calc(var(--lift2) * -1), 0);
      box-shadow: var(--shadow2);
    }
  }

  /* Premium interactive card */
  .card-interactive {
    transition:
      border-color 120ms var(--easeOut),
      background-color 120ms var(--easeOut),
      transform var(--durMed) var(--easeOut) 120ms;
  }

  .card-interactive:hover {
    border-color: rgba(var(--p), 0.2);
    background-color: rgb(var(--surface2));
  }

  @media (prefers-reduced-motion: no-preference) {
    .card-interactive:hover {
      transform: translate3d(0, calc(var(--lift2) * -1), 0);
      box-shadow: var(--shadow2);
    }
  }

  /* Icon normalization */
  .icon-inline {
    width: 18px;
    height: 18px;
    flex-shrink: 0;
    stroke-width: 2;
    opacity: 0.75;
    display: inline-block;
    vertical-align: -0.125em;
  }

  .icon-nav {
    width: 20px;
    height: 20px;
    flex-shrink: 0;
    stroke-width: 2;
    opacity: 0.75;
    display: inline-block;
    vertical-align: -0.125em;
  }

  .icon-feature {
    width: 24px;
    height: 24px;
    flex-shrink: 0;
    stroke-width: 2;
    opacity: 0.75;
    display: inline-block;
    vertical-align: -0.125em;
  }

  .icon-inline:hover,
  .icon-nav:hover,
  .icon-feature:hover {
    opacity: 1;
  }
}

/* Line clamp */
.clamp-1,
.clamp-2,
.clamp-3 {
  display: -webkit-box;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.clamp-1 {
  -webkit-line-clamp: 1;
  line-clamp: 1;
}

.clamp-2 {
  -webkit-line-clamp: 2;
  line-clamp: 2;
}

.clamp-3 {
  -webkit-line-clamp: 3;
  line-clamp: 3;
}

/* Scroll margin for sticky header */
:target {
  scroll-margin-top: 92px;
}

/* View transitions */
@supports (view-transition-name: root) {
  ::view-transition-group(*) {
    animation-duration: 260ms;
    animation-timing-function: var(--easeOut);
  }

  ::view-transition-old(root),
  ::view-transition-new(root) {
    animation: none;
  }
}

@media (prefers-reduced-motion: reduce) {
  @supports (view-transition-name: root) {
    ::view-transition-group(*) {
      animation-duration: 1ms;
    }
  }
}